class l{constructor(){this.currentSystem="faceted",this.reactivityState={mouse:{faceted:!0,quantum:!1,holographic:!1,polychora:!1,mixed:!1},click:{faceted:!0,quantum:!1,holographic:!1,polychora:!1,mixed:!1},scroll:{faceted:!0,quantum:!1,holographic:!1,polychora:!1,mixed:!1},audio:!1,interactivity:!0,deviceTilt:!1},window.unifiedReactivityManager=this,this.setupGlobalFunctions()}setupGlobalFunctions(){window.getCurrentReactivityState=()=>this.getCurrentState(),window.setReactivityState=t=>this.setState(t),window.resetReactivityToDefaults=t=>this.resetToDefaults(t),window.syncReactivityToSystem=t=>this.syncToSystem(t)}getCurrentState(){var e;const t={system:this.currentSystem,mouse:{...this.reactivityState.mouse},click:{...this.reactivityState.click},scroll:{...this.reactivityState.scroll},audio:this.reactivityState.audio,interactivity:this.reactivityState.interactivity,deviceTilt:this.reactivityState.deviceTilt,metadata:{timestamp:Date.now(),audioEnabled:window.audioEnabled||!1,interactivityEnabled:window.interactivityEnabled!==!1,deviceTiltEnabled:((e=window.deviceTiltHandler)==null?void 0:e.isEnabled)||!1,userAgent:navigator.userAgent.substr(0,50)}};return console.log("ðŸ”µ Reactivity state captured:",t),t}setState(t){return t?(console.log("ðŸ”µ Setting reactivity state:",t),t.system&&(this.currentSystem=t.system),t.mouse&&(this.reactivityState.mouse={...t.mouse}),t.click&&(this.reactivityState.click={...t.click}),t.scroll&&(this.reactivityState.scroll={...t.scroll}),typeof t.audio=="boolean"&&(this.reactivityState.audio=t.audio),typeof t.interactivity=="boolean"&&(this.reactivityState.interactivity=t.interactivity),typeof t.deviceTilt=="boolean"&&(this.reactivityState.deviceTilt=t.deviceTilt),this.syncToGlobals(),this.syncToUI(),!0):!1}resetToDefaults(t){console.log(`ðŸŽ›ï¸ Resetting reactivity to ${t} defaults`),Object.keys(this.reactivityState.mouse).forEach(a=>{this.reactivityState.mouse[a]=!1,this.reactivityState.click[a]=!1,this.reactivityState.scroll[a]=!1});const e={faceted:{mouse:"faceted",click:"faceted",scroll:"faceted"},quantum:{mouse:"quantum",click:"quantum",scroll:"quantum"},holographic:{mouse:"holographic",click:"holographic",scroll:"holographic"},polychora:{mouse:"polychora",click:"polychora",scroll:"faceted"}},i=e[t]||e.faceted;this.reactivityState.mouse[i.mouse]=!0,this.reactivityState.click[i.click]=!0,this.reactivityState.scroll[i.scroll]=!0,this.reactivityState.audio=t==="holographic",this.currentSystem=t,this.syncToGlobals(),this.syncToUI()}syncToSystem(t){this.currentSystem=t,this.hasAnyReactivity(t)?this.syncToGlobals():this.resetToDefaults(t)}hasAnyReactivity(t){return this.reactivityState.mouse[t]||this.reactivityState.click[t]||this.reactivityState.scroll[t]}syncToGlobals(){var t;window.audioEnabled=this.reactivityState.audio,window.interactivityEnabled=this.reactivityState.interactivity,this.reactivityState.deviceTilt&&window.deviceTiltHandler?window.deviceTiltHandler.isEnabled||window.deviceTiltHandler.enable():!this.reactivityState.deviceTilt&&((t=window.deviceTiltHandler)!=null&&t.isEnabled)&&window.deviceTiltHandler.disable(),window.reactivityManager&&window.reactivityManager.updateReactivityState(this.getCurrentState())}syncToUI(){["faceted","quantum","holographic","polychora","mixed"].forEach(i=>{const a=document.getElementById(`${i}Mouse`),c=document.getElementById(`${i}Click`),o=document.getElementById(`${i}Scroll`);a&&(a.checked=this.reactivityState.mouse[i]),c&&(c.checked=this.reactivityState.click[i]),o&&(o.checked=this.reactivityState.scroll[i])});const t=document.getElementById("audioToggle"),e=document.getElementById("deviceTiltToggle");t&&(t.textContent=this.reactivityState.audio?"ðŸŽµ Audio ON":"ðŸ”‡ Audio OFF"),e&&(e.textContent=this.reactivityState.deviceTilt?"ðŸ“± Tilt ON":"ðŸ“± Tilt OFF")}getSystemParameterOverrides(t){const e={};return this.reactivityState.audio&&(t==="holographic"||t==="quantum")&&(e.audioReactive=!0),this.reactivityState.deviceTilt&&(e.deviceTiltEnabled=!0),(this.reactivityState.mouse[t]||this.reactivityState.mouse.mixed)&&(e.mouseInteractionEnabled=!0),e}toJSON(){return{reactivityState:this.getCurrentState(),version:"1.0",timestamp:Date.now()}}fromJSON(t){return t.reactivityState?(this.setState(t.reactivityState),!0):!1}}window.UnifiedReactivityManager=l;export{l as UnifiedReactivityManager};
